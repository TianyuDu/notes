\documentclass[11pt]{article}

\usepackage{spikey}
\usepackage{amssymb}
\usepackage[margin=1in]{geometry}

\usepackage{setspace}
\linespread{1.15}

\newcommand{\s}[0]{$\sigma$}

\title{Notes on Measure Theory}
\author{Tianyu Du}

\begin{document}	
	\maketitle
	\tableofcontents
	\section{Sigma Algebra}
	\begin{definition}
		For a set $X$, a set $\mc{A} \subseteq \mc{P}(X)$ is a \textbf{\s-algebra} if it satisfies the following properties:
		\begin{enumerate}
			\item $\varnothing, X \in \mc{A}$;
			\item for all $A \in \mc{A}$, $A^c \in \mc{A}$ as well;
			\item for a sequence in $\mc{A}$, $\{A_i\}_{i\in\N}$, the union $\bigcup_{i\in\N} \in \mc{A}$ as well.
		\end{enumerate}
		An element $A \in \mc{A}$ is called a \textbf{$\mc{A}$-measurable set}.
	\end{definition}
	
	\begin{remark}
		It's easy to show that the largest \s-algebra of set $X$ is the power set $\mc{P}(X)$, and the smallest \s-algebra is $\{\varnothing, X\}$.
	\end{remark}
	
	\begin{theorem}
		Let $\{\mc{A}_i\}_{i \in I}$ be the collection of all $\sigma$-algebra on $X$. Then, $\bigcap_{i \in I} \mc{A}_i$ is also a $\sigma$-algebra on $X$.
	\end{theorem}
	
	\begin{proof}
		Clearly, $\varnothing, X \in \bigcap_{i \in I} \mc{A}_i$ given that every $\mc{A}_i$ is a \s-algebra.
		
		For $A \in \bigcap_{i \in I} \mc{A}_i$, $A \in \mc{A}_i$ for all $i \in I$. Hence $A^c \in \mc{A}_i$ for all $i \in I$. Therefore, $A^c \in \bigcap_{i \in I} \mc{A}_i$.
		
		Let $\{F_j\}_{j \in \N}$ be a sequence such that $F_j \in \bigcap_{i \in I} \mc{A}_i$ for every $j$. Then $F_j \in A_i$ for all $i, j$ since $A_i$'s are \s-algebra. Hence, $\bigcup_{j \in \N} F_j \in A_i$ for all $i \in I$, and $\bigcup_{j \in \N} F_j \in \bigcap_{i \in I} \mc{A}_i$.
	\end{proof}
	
	\begin{remark}
		The union of \s-algebra are not necessarily a \s-algebra. For example, consider
		\begin{align}
			X &= \{a, b, c\} \\
			\mc{A}_1 &= \{\varnothing, \{a\}, \{b, c\}, X\} \\
			\mc{A}_2 &= \{\varnothing, \{b\}, \{a, c\}, X\} \\
			\mc{A}_1 \cup \mc{A}_2 &= \{\varnothing, \{a\}, \{b\}, \{b, c\}, \{a, c\}, X\}
		\end{align}
		Both $\mc{A}_1$ and $\mc{A}_2$ are \s-algebra, but $\mc{A}_1 \cup \mc{A}_2$ is not a \s-algebra because $\{a\} \cup \{b\} \notin \mc{A}_1 \cup \mc{A}_2$.
	\end{remark}
	
	\begin{definition}
		For $\mc{M} \subseteq \mc{P}(X)$ ($\mc{M}$ is not necessarily a $\sigma$-algebra), the smallest $\sigma$-algebra (by taking intersections) containing $\mc{M}$ is defined as the \textbf{$\sigma$-algebra generated by $\mc{M}$}.
		The generated $\sigma$-algebra is simply the intersection of all $\sigma$-algebra that are supersets of $\mc{M}$.
		\begin{align}
			\sigma(\mc{M}) = \bigcap_{\mc{A} \supseteq \mc{M}\ s.t.\ \mc{A}\tx{ is $\sigma$-algebra}} \mc{A}
		\end{align}
		The \s-algebra generated by $\mc{M}$ is therefore the smallest \s-algebra containing $\mc{M}$.
	\end{definition}
	
	\begin{definition}
		Let $(X, \tau)$ be a topological space, then the \textbf{Borel algebra} is $\sigma$-algebra generated by the collection of open sets $\tau$.
		\begin{align}
			\mc{B}(X) := \sigma(\tau)
		\end{align}
	\end{definition}
	
	\begin{remark}
		We do not use the entire power set for analysis because it's too large to construct a sensible measure on (see Theorem \ref{thm:nomeasure}).
	\end{remark}
	
	\begin{definition}
		For a measurable space $(X, \mc{A})$, a map $\mu:\mc{A} \to [0, \infty]$ is a \textbf{measure} if $\mu$ satisfies
		\begin{enumerate}
			\item $\mu(\varnothing) = 0$.
			\item (\s-addivitity)$\mu\left(\bigcup_{i=1}^\infty A_i\right) = \sum_{i=1}^\infty \mu(A_i)$, where $A_i \in \mc{A}$ for all $i$ and $A_i \cap A_j = \varnothing$ for all $i \neq j$.
		\end{enumerate}
	\end{definition}
	
	\begin{example}
		For an element $x \in X$, the \textbf{Dirac measure},$\delta_x$, on a measurable space $(X, \mc{A})$ is defined as
		\begin{align}
			\delta_x(A) = \begin{cases}
				1 &\tx{ if } x \in A \\
				0 &\tx{ if } x \notin A
			\end{cases}
		\end{align}
	\end{example}
	
	\begin{definition}
		For a measurable space $(X, \mc{A})$ and a measure $\mu$ defined on it, the triple $(X, \mc{A}, \mu)$ is a \textbf{measure space}.
	\end{definition}
	
	\begin{theorem} \label{thm:nomeasure}
		There is no measure $\mu$ on $(\R, \mc{P}(\R))$ satisfying the following two conditions: (i) $\mu((a, b]) = b-a$ for every $a < b$ and (ii) $\mu(x+A) = \mu(A)$ for all $a \in \R$ and $A \in \mc{P}(\R)$. 
	\end{theorem}
	
	\begin{proof}
		Suppose, for contradiction, there exists such a measure $\mu$, then $\mu((0, 1]) = 1 < \infty$.
		
		Claim: the only measure on $(\R, \mc{P}(\R))$ satisfying $\mu((0, 1]) < \infty$ and $\mu(x+A) = \mu(A)$ is the zero measure.
		
		To prove the claim, let $I := (0, 1]$ and defien the following equivalence relation on $I$:
		\begin{align}
			x \sim y \iff x - y \in \Q
		\end{align}
		the corresponding equivalence class of $x$ on $I$ can be written as
		\begin{align}
			[x] = \{x+r: r \in \Q \land x+r \in I\}
		\end{align}
		The collection of all such equivalence classes, $\mc{A}$, is a disjoint decomposition of $I$. (for every $x \in I$, $[x]$ must in $\mc{A}$ and $x \in [x]$ trivially. If there exists different $[x] \neq [y]$ but $[x] \cap [y] \neq \varnothing$, take $z \in [x] \cap [y]$, by the transitivity of equivalence relation, $x \sim z \sim y$. Therefore, $[x] = [y]$, contradiction.)
		
		For each $[x] \in \mc{A}$, take exactly one $a_x \in [x]$ and define set $A := \{a_x: [x] \in \mc{A}\}$. As a result, set $A$ satisfies the following two properties:
		\begin{enumerate}
			\item $\forall x \in I, \exists a_x \in A\ s.t.\ a_x \in [x]$.
			\item $\forall x, y \in A$, $x \sim y \implies x = y$.
		\end{enumerate}
		Since $\Q \cup (-1, 1]$ is countable, let $(r_n)_{n \in \N}$ be an enumeration of all elements in it.
		
		For each $n \in \N$, define $A_n := r_n + A$.
		
		Note that for any $m, n$ such that $A_m \cap A_n \neq \varnothing$, take $x \in A_m \cap A_n$. By definition, 
		\begin{align}
				x &= r_n + a_n \\
				x &= r_m + a_m
		\end{align}
		where $a_n, a_m \in A$ and $r_n, r_m \in \Q$. Consequently,
		\begin{align}
			a_n - a_m = r_m - r_n \in \Q
		\end{align}
		Therefore, $a_n \sim a_m$. By the second property of $A$, $a_n = a_m$. Thus, $r_m = r_n$ and $m = n$.
		
		Take the counterposition of what we just proved, $m \neq n \implies A_m \cap A_n = \varnothing$.
		
		Let $z \in (0, 1]$, there exists some $a \in A$ such that $z \in [x]$. That is, $z = x + r$ for some $r \in \Q \cap (-1, 1]$. There must exist some $m \in \N$ such that $r_m = r$, and consequently, $z \in A_m$.
		 
		Therefore, $(0, 1] \subseteq \bigcup_{n\in \N} A_n \subseteq (-1, 2]$ (the second relation is obvious). Moreover,
		\begin{align}
			\mu((0, 1]) \leq \mu(\bigcup_{n\in \N} A_n) \leq \mu((-1, 2]) = \mu((-1, 0]) + \mu((0, 1]) + \mu((1, 2]) = 3 \mu((0, 1])
		\end{align}
		Note that we just proved $\bigcup_{n\in \N} A_n$ is a disjoint union, hence,
		\begin{align}
			\mu((0, 1]) \leq \sum_{n=1}^\infty \mu(A_n) \leq 3\mu((0, 1]) \\
			\implies((0, 1]) \mu \leq \sum_{n=1}^\infty \mu(A + r_n) \leq 3\mu((0, 1]) \\
			\implies \mu((0, 1]) \leq \sum_{n=1}^\infty \mu(A) \leq 3\mu((0, 1])
		\end{align}
		Since $\mu((0, 1])$ is finite, the only value $\mu(A)$ can take is zero, and $\mu(I) = 0$ as well. Consequently, for any set $S \in \mc{P}(\R)$, if $S \subseteq I$, then $\mu(S) \leq \mu(I)$ and $\mu(S) = 0$. Otherwise, let $l = \floor{\inf(S)}$ and $u = \ceil{\sup(S)}$.
		\begin{align}
			I \subseteq S \subseteq \bigcup_{n=l}^{u} (n, n+1]
		\end{align}
		Therefore,
		\begin{align}
			0 \leq \mu(S) \leq \sum_{n=l}^{u} \mu(n + (0, 1]) = \sum_{n=l}^{u} \mu((0, 1]) = 0
		\end{align}
		It's shown that $\mu(S) = 0$ for every $S \subseteq \mc{P}(\R)$.
		
		This leads to a contradiction to the first property required ($\mu((a, b]) = b-a$).
	\end{proof}
	
	\section{Measurable Spaces and Measurable Maps}
	\begin{definition}
		Let $(X_1, \mc{A}_1)$ and $(X_2, \mc{A}_2)$ be two measurable spaces. A function $f: X_1 \to X_2$ is a \textbf{measurable map} with respect to $\mc{A}_1$ and $\mc{A}_2$ (sometimes written as $f: (X_1, \mc{A}_1) \to (X_2, \mc{A}_2)$) if
		\begin{align}
			f^{-1}(A_2) \in \mc{A}_1\quad \forall A_2 \in \mc{A}_2
		\end{align}
		That is, the pre-image of every set in $\mc{A}_2$ is an element in $\mc{A}_1$ as well.
	\end{definition}
	
	\begin{theorem}
		Let $(X, \mc{A})$ be a measurable space, then the indicator (characteristic) function for any $A \in \mc{A}$, $\mc{X}_A: X \to \R$, is measurable with respect to $\mc{A}$ and $\mc{B}(\R)$.
		\begin{align}
			\mc{X}_A(x) := \begin{cases}
				1 &\tx{ if } x \in A \\
				0 &\tx{ if } x \notin A
			\end{cases}
		\end{align}
	\end{theorem}
	
	\begin{proof}
		Since $\mc{X}_A$ can only take values from $\{0, 1\}$, the pre-image of any set $\centernot \subseteq \{0, 1\}$ is undefined.
		We only need to consider pre-images of subsets of $\{0, 1\}$:
		\begin{align}
			\mc{X}_A^{-1}(\varnothing) &= \varnothing \\
			\mc{X}_A^{-1}(\{0, 1\}) &= X \\
			\mc{X}_A^{-1}(\{0\}) &= A^c \\
			\mc{X}_A^{-1}(\{1\}) &= A
		\end{align}
		Therefore, $\mc{X}_A$ is measurable.
	\end{proof}
	
	\begin{theorem}
		The composition of measurable maps is measurable.
	\end{theorem}
	
	\begin{proof}
		For measurable spaces $(X_1, \mc{A}_1)$, $(X_2, \mc{A}_2)$, and $(X_3, \mc{A}_3)$, let $f: (X_1, \mc{A}_1) \to (X_2, \mc{A}_2)$ and $g: (X_2, \mc{A}_2) \to (X_3, \mc{A}_3)$ be two measurable functions.
		
		Let $A_3 \in \mc{A}_3$, $A_2 := g^{-1}(A_3) \in \mc{A}_2$. Similarly, $A_1 := f^{-1}(A_2) \in \mc{A}_1$ as well. Note that $A_1 = (g \circ f)^{-1}(A_3)$, therefore, $g \circ f$ is measurable.
	\end{proof}
	
	\begin{theorem}
		For measurable spaces $(X, \mc{A})$ and $(\R, \mc{B}(\R)$ and measurable maps $f, g: \Omega \to \R$, $f + g$, $f - g$ and $\abs{f}$ are measurable.
	\end{theorem}
	
	\begin{proof}
		
	\end{proof}
	
	\section{Lebesgue Measures and Lebesgue Integrals}
	\begin{definition}
	    For measurable space $(\R, \mc{B}(\R)))$, the \textbf{Lebesgue measure} $\mu: \mc{B}(\R) \to [0, \infty]$ is defined as
	    \begin{align}
	        \mu([a, b)) = b - a
	    \end{align}
	\end{definition}
	
	\begin{definition}
		Let $(X, \mc{A}, \mu)$ be a measure space and for any $A \in \mc{A}$, the \textbf{Lebesgue integral} of indicator function $\mc{X}_A$ on $X$ is defined to be $\mu(A) \in [0, \infty]$.
		\begin{align}
			\int_X \mc{X}_A\ d\mu := \mu(A)
		\end{align}
	\end{definition}
	
	\begin{definition}
		A function $f: (X, \mc{A}) \to (\R, \mc{B}(\R))$ is a \textbf{simple function} (also termed step function and stair-case function) if there exists finitely many $A_1, \cdots, A_n \in \mc{A}$ and $c_1, \cdots, c_n \in \R$ such that
		\begin{align}
			f = \sum_{i=1}^n c_i \mc{X}_{A_i}
		\end{align}
		That is, a function $f$ is simple if it can be expressed as a linear combination of \emph{finitely} many indicators.
		
		Let $\mathbb{S}^+$ denote the set of non-negative simple functions.
		\begin{align}
			\mathbb{S}^+ := \left\{
				f: (X, \mc{A}) \to (\R, \mc{B}(\R))\ \vert\ f \tx{ is simple and } f \geq 0
			\right\}
		\end{align}
		Since simple functions only take finitely many values, every $f \in \mathbb{S}^+$ can be written as
		\begin{align}
			f = \sum_{t \in f(X)} t \mc{X}_{\{x\in X|f(x) = t\}} = \sum_{i=1}^n c_i \mc{X}_{A_i}, \quad c_i \geq 0
		\end{align}
	\end{definition}
	
	\begin{theorem}
		Simple functions are measurable.
	\end{theorem}

	
	\begin{definition}[Lebesgue integral for $\mathbb{S}^+$]
		For $f \in \mathbb{S}^+$ such that $f = \sum_{i=1}^n c_i \mc{X}_{A_i}$ with $c_i \geq 0$, the \textbf{Lebesgue integral} of $f$ with respect to $\mu$ is
		\begin{align}
			I(f) = \int_X f\ d\mu := \sum_{i=1}^n c_i \mu(A_i) \in [0, \infty]
		\end{align}
	\end{definition}
	
	\begin{theorem}
		The Lebesgue integral of $f, g \in \mathbb{S}^+$ satisfies
		\begin{enumerate}
			\item $I(\alpha f + \beta g) = \alpha I(f) + \beta I(g)$ for $\alpha, \beta \geq 0$,
			\item $f \leq g \implies I(f) \leq I(g)$.
		\end{enumerate}
	\end{theorem}
	
	\begin{proof}
		
	\end{proof}
	
	\begin{definition}[Lebesgue integral for non-negative functions]
		For $f \geq 0$ be a measurable function, the \textbf{Lebesgue integral} of $f$ with respect to measure $\mu$ is
		\begin{align}
			I(f) = \int_X f\ d\mu := \sup\left\{\int_X s\ d\mu: s \in \mathbb{S}^+ \tx{ and } s \leq f \right\}
		\end{align}
	\end{definition}
	
	\begin{definition}
		A function $f$ is \textbf{$\mu$-integrable} if $\int_X f\ d\mu < \infty$.
	\end{definition}
	
	\begin{theorem}\label{thm:1}
		Let $f, g: (X, \mc{A}) \to (\R, \mc{B}(\R))$ be measurable functions, if $0 \leq f = g$ except a $\mu$-measure-zero set, that is,
		\begin{align}
			\mu\left(\left\{
				x \in X\ |\ f(x) \neq g(x)
			\right\}\right) = 0
		\end{align}
		then $\int_X f\ d\mu = \int_X g\ d\mu$.
	\end{theorem}
	
	\begin{lemma}\label{lem:1}
		Let $h: X \to [0, \infty)$ be a simple function, for any $\tilde{X} \subseteq X$ such that $\mu(\tilde{X}^c) = 0$, $\int_X h\ d\mu$ is independent from the value of $h$ on $\tilde{X}^c$.
	\end{lemma}
	
	\begin{proof}[Proof. of Lemma \ref{lem:1}]
		Since $h$ is a simple function, it takes only finitely many values and can be written as
		\begin{align}
			h = \sum_{t \in h(X)} t \mc{X}_{\{x \in X | h(x) = t\}} = \sum_{t \in h(X) \backslash \{0\}} t \mc{X}_{\{x \in X | h(x) = t\}}
		\end{align}
		define 
		\begin{align}
			\tilde{h} = \begin{cases}
				h(x) &\tx{ if } x \in \tilde{X} \\
				a &\tx{ if } x \in \tilde{X}^c
			\end{cases}
		\end{align}
		where $a \in [0, \infty)$ takes an arbitrary value, and $\tilde{h} \in \mathbb{S}^+$ as well.
		\begin{align}
			\int_X \tilde{h}\ d\mu &= \sum_{t \in \tilde{h}(X)} t \mu(\{x \in X | \tilde{h}(x) = t\})\\
			&= a \underbrace{\mu(\tilde{X}^c)}_{=0} + \sum_{t \in h(\tilde{X}) \backslash \{0\}} t \mu(\{x \in \tilde{X} | h(x) = t\}) \\
			&= \sum_{t \in h(\tilde{X}) \backslash \{0\}} t \mu(\{x \in \tilde{X} | h(x) = t\}) \\
			&= \sum_{t \in h(\tilde{X}) \backslash \{0\}} t \mu(\{x \in \tilde{X} | h(x) = t\}) +
			\sum_{t \in h(\tilde{X}) \backslash\{0\}} t \underbrace{\mu(\{x \in \tilde{X}^c | h(x) = t\})
			}_{=0} \\
			&= \sum_{t \in h(\tilde{X}) \backslash \{0\}} t \mu(\{x \in \tilde{X} | h(x) = t\} \cup \{x \in \tilde{X}^c | h(x) = t\}) \\
			&= \sum_{t \in h(\tilde{X}) \backslash \{0\}} t \mu(\{x \in X | h(x) = t\}) + \sum_{t' \in h(X) \backslash (h(\tilde{X}) \cup \{0\})} t' \mu(\{x \in X | h(x) = t'\}) \label{eq:1}
		\end{align}
		Note that $t'$s are values that are attained in $\tilde{X}^c$ only, therefore, $\{x \in X | h(x) = t'\} \subseteq \tilde{X}^c$ and have measure zero.
		\begin{align}
			(\ref{eq:1}) &= \sum_{t \in h(X) \backslash \{0\}} t \mu(\{x \in X | h(x) = t\}) = \int_X h\ d\mu
		\end{align}
		Hence, the value of $\int_X h\ d\mu$ is the same no matter how we change $h$'s values on $\tilde{X}^c$.
	\end{proof}
	
	\begin{proof}[Proof. of Theorem \ref{thm:1}]
		Let $\tilde{X} := \{x \in X: f(x) \neq g(x)\}$, for each simple function $h$ in above set, define
		\begin{align}
			\tilde{h} = \begin{cases}
				h(x) &\tx{ if } x \in \tilde{X} \\
				0 &\tx{ if } x \in \tilde{X}^c
			\end{cases}
		\end{align}
		Then,
		\begin{align}
			\int_X f\ d\mu &= \sup \left \{I(h)\ |\ h \in \mathbb{S}^+, h \leq f \tx{ on } X \right\} \\
			&= \sup \left \{I(\tilde{h})\ |\ {h} \in \mathbb{S}^+, {h} \leq f \tx{ on } {X} \right\} \\
			&= \sup \left \{I(\tilde{h})\ |\ {h} \in \mathbb{S}^+, {h} \leq f \tx{ on } \tilde{X} \right\} \label{eq:2}\\
			&= \sup \left \{I(\tilde{h})\ |\ {h} \in \mathbb{S}^+, {h} \leq g \tx{ on } \tilde{X} \right\} \\
			&= \int_X g\ d\mu
		\end{align}
		Where equation (\ref{eq:2}) holds because the value of $h$ on $\tilde{X}^c$ does not affect $I(\tilde{h})$.
%		Let $\tilde{X} := \{x \in X: f(x) \neq g(x)\}$. Define
%		\begin{align}
%			\tilde{f}(x) = \begin{cases}
%				f(x) &\tx{ if } x \in \tilde{X} \\
%				0 &\tx{ if } x \in \tilde{X}^c
%			\end{cases} \quad
%			\tilde{g}(x) = \begin{cases}
%				g(x) &\tx{ if } x \in \tilde{X} \\
%				0 &\tx{ if } x \in \tilde{X}^c
%			\end{cases}
%		\end{align}
%		So that $\tilde{f} = \tilde{g}$ for all $x \in X$. By Lemma \ref{lem:1},
%		\begin{align}
%			\int_X f\ d\mu = \int_X \tilde{f}\ d\mu = \int_X \tilde{g}\ d\mu = \int_X g\ d\mu 
%		\end{align}
	\end{proof}

	\begin{theorem}
		Let $f, g: (X, \mc{A}) \to (\R, \mc{B}(\R))$ be measurable functions, if $0 \leq f \leq g$ except a $\mu$-measure-zero set, then $\int_X f\ d\mu \leq \int_X g\ d\mu$.
	\end{theorem}
	
	\begin{proof}
%		Define
%		\begin{align}
%			\tilde{f}(x) = \begin{cases}
%				f(x) &\tx{ if } x \in \tilde{X} \\
%				0 &\tx{ if } x \in \tilde{X}^c
%			\end{cases} \quad
%			\tilde{g}(x) = \begin{cases}
%				g(x) &\tx{ if } x \in \tilde{X} \\
%				0 &\tx{ if } x \in \tilde{X}^c
%			\end{cases}
%		\end{align}
%		So that $\tilde{f} \leq \tilde{g}$ everywhere.
		By definition of Lebesgue integral,
		\begin{align}
			\int_X f\ d\mu = \sup \left \{I(h)\ |\ h \in \mathbb{S}^+, h \leq f \tx{ on } X \right\}
		\end{align}
		Let $\tilde{X} := \{x \in X: f(x) \leq g(x)\}$, for each simple function $h$ in above set, define
		\begin{align}
			\tilde{h} = \begin{cases}
				h(x) &\tx{ if } x \in \tilde{X} \\
				0 &\tx{ if } x \in \tilde{X}^c
			\end{cases}
		\end{align}
		Then $h \leq f \iff \tilde{h} \leq f$, and $I(h) = I(\tilde{h})$ by Lemma \ref{lem:1}.
		\begin{align}
			\sup \left \{I(h)\ |\ h \in \mathbb{S}^+, h \leq f \tx{ on } X \right\} &= \sup \left \{I(\tilde{h})\ |\ {h} \in \mathbb{S}^+, {h} \leq f \tx{ on } \tilde{X} \right\} \\
			&\leq \sup \left \{I(\tilde{h})\ |\ {h} \in \mathbb{S}^+, {h} \leq g \tx{ on } \tilde{X} \right\} \\
			&= \int_X g\ d\mu
		\end{align}
		Therefore,
		\begin{align}
			\int_X f\ d\mu \leq \int_X g\ d\mu
		\end{align}
	\end{proof}

	\begin{theorem}
		Let $f: (X, \mc{A}) \to (\R, \mc{B}(\R))$ be measurable functions, $f = 0$ except a $\mu$-measure-zero set if and only if $\int_X f\ d\mu = 0$.
	\end{theorem}
	
	\begin{proof}
		Similar to previous proofs.
	\end{proof}
	
	\begin{theorem}[Monotone Convergence Theorem]
		For measure space $(X, \mc{A}, \mu)$, let $(f_n: X \to [0,\infty))_{n \in \N}$ be a sequence of measurable functions such that
		\begin{enumerate}
			\item $f_{n} \leq f_{n+1}$ except for a $\mu$-measure-zero set,
			\item $\lim_{n\to\infty}$ converges point-wisely to $f$ except for a $\mu$-measure-zero set.
		\end{enumerate}
		Then,
		\begin{align}
			\lim_{n \to \infty} \int_X f_n\ d\mu = \int_X \lim_{n \to \infty} f_n\ d\mu = \int_X f\ d\mu
		\end{align}
	\end{theorem}
	
	\begin{proof}
		Since $f_{n} \leq f_{n+1}$ almost everywhere, and $f_n \to f$ point-wisely almost everywhere, therefore,
		\begin{align}
			f_n \leq f_{n+1} \leq f\quad \forall n \in \N \tx{ except a set with zero measure}
		\end{align}
		Consequently,
		\begin{align}
			\int_X f_n\ d\mu &\leq \int_X f_{n+1}\ d\mu\leq \int_X f\ d\mu\quad \forall n \in \N
		\end{align}
		As a result,
		\begin{align}
			\lim_{n \to \infty} \int_X f_n\ d\mu \leq \int_X f\ d\mu \label{eq:res1}
		\end{align}
		Let $h$ be a simple function such that $0 \leq h \leq f$, let $\varepsilon > 0$, define
		\begin{align}
			X_n &:= \left\{x \in X\ |\ f_n(x) \geq (1 - \varepsilon) h(x) \right\} \\
			\tilde{X} &:= \bigcup_{n=1}^\infty X_n
		\end{align}
		Note that $f_{n+1} \geq f_n$ implies $X_{n} \subseteq X_{n+1}$ and $\lim_{n\to \infty} X_n = \tilde{X}$.
		Moreover, because the monotonicity and point-wise convergence happen almost everywhere in $X$, 
		almost all $x \in X$ are in some $X_n$ with $n$ sufficiently large, hence $\mu(\tilde{X}^c) = 0$ (this holds for the limit $\tilde{X}^c$ only but not necessarily for $X_n^c$).
		
		Because $X_n \subseteq X$ and $f_n \geq 0$, for any $n \in \N$,
		\begin{align}
			\int_X f_n\ d\mu &\geq \int_{X_n}f_n\ d\mu \geq \int_{X_n} (1 - \varepsilon) h\ d\mu \\
			\implies \lim_{n \to \infty} \int_X f_n\ d\mu &\geq \lim_{n \to \infty} \int_{X_n} (1 - \varepsilon) h\ d\mu \\
			&= \int_{\tilde{X}} (1 - \varepsilon) h\ d\mu \\
			&= \int_{X} (1 - \varepsilon) h\ d\mu
		\end{align}
		Where the last equality holds because $\mu(\tilde{X}^c) = 0$.
		
		Since this inequality holds for all $\varepsilon > 0$,
		\begin{align}
			\lim_{n \to \infty} \int_X f_n\ d\mu &\geq \lim_{\varepsilon \to 0^+} \int_{X} (1 - \varepsilon) h\ d\mu = \int_X h\ d\mu
		\end{align}
		moreover, this inequality holds for all $0 \leq h \leq f$,
		\begin{align}
			\lim_{n \to \infty} \int_X f_n\ d\mu &\geq \int_{X} f\ d\mu \label{eq:res2}
		\end{align}
		Results (\ref{eq:res1}) and (\ref{eq:res2}) lead to the conclusion.
	\end{proof}
	
	\begin{corollary}
		Let $(g_n)_{n \in \N}$ be a sequence of non-negative measurable functions, $g_n: X \to [0, \infty]$, then the integral of series equals the series of integrals:
		\begin{align}
			\sum_{n=1}^\infty g_n: X \to [0, \infty]
		\end{align}
		is measurable, and
		\begin{align}
			\int_X \sum_{n=1}^\infty g_n\ d\mu = \sum_{n=1}^\infty \int_X g_n\ d\mu
		\end{align}
	\end{corollary}
	
	\begin{proof}
		Let $g_k := \sum_{n=1}^k g_n$ and $g = \lim_{k \to \infty} g_k$. Since $g_n \geq 0$, $g_k \leq g_{k+1}$ for every $k$. By the monotone convergence theorem,
		\begin{align}
			\int_X \lim_{k\to\infty} g_k &= \lim_{k\to \infty} \int_X g_k\ d\mu \\
			\implies \int_X \sum_{n=1}^\infty g_n\ d\mu &= \lim_{k \to \infty} \int_X \sum_{n=1}^k  g_n\ d\mu \\
			&= \lim_{k \to \infty} \sum_{n=1}^k \int_X g_n\ d\mu \\
			&= \sum_{n=1}^\infty \int_X g_n\ d\mu
		\end{align}
	\end{proof}

	\begin{lemma}[Fatou's Lemma]\label{fatous}
		For a measure space $(X, \mc{A}, \mu)$, let $(f_n)_{n \in \N}$ be a sequence of \ul{measurable} (note this is the only requirement) functions with range $[0, \infty]$, then
		\begin{align}
			\int_X \liminf_{n \to \infty} f_n\ d\mu \leq \liminf_{n \to \infty} \int_X f_n\ d\mu
		\end{align}
	\end{lemma}

	\begin{proposition}
		Infimum of measurable functions is measurable.
	\end{proposition}
	
	\begin{proposition}
		Limit of measurable functions is measurable.
	\end{proposition}
	
	\begin{proof}[Proof of Lemma \ref{fatous}]
	    Define
	    \begin{align}
	        g_n(x) &:= \inf_{k \geq n} f_k(x)
	       % \\
	       % g &:= \lim_{n \to \infty} g_n \equiv \liminf_{n\to\infty}f_n
	    \end{align}
	    Note that $(g_n)$ is a non-decreasing sequence of measurable functions, the Monotone convergence theorem suggests
	    \begin{align}
	        \int_X \lim_{n \to \infty} g_n\ d\mu
	        = \lim_{n\to\infty} \int_X g_n\ d\mu
	    \end{align}
	    Since $g_n$'s are non-decreasing, $(\int_X g_n\ d\mu)_{n \in \N}$ is non-decreasing as well.
	    Therefore, $\int_X g_n\ d\mu = \inf_{k \geq n} \int_X g_k\ d\mu$ for every $n \in \N$ and consequently,
	    \begin{align}
	        \lim_{n\to\infty}\int_X g_n\ d\mu = \liminf_{n\to\infty}\int_X g_n\ d\mu
	    \end{align}
	    Moreover, for every $n \in \N$, $g_n \leq f_n$ by the definition, therefore,
	    \begin{align}
	        \int_X g_n\ d\mu \leq \int_X f_n\ d\mu
	    \end{align}
	    This inequality is preserved under $\liminf$, hence
	    \begin{align}
	        \liminf_{n\to\infty}\int_X g_n\ d\mu \leq \liminf_{n\to\infty}\int_X f_n\ d\mu
	    \end{align}
	    Put everything together, 
	    \begin{align}
	        \int_X \liminf_{n \to \infty}f_n\ d\mu
	        \equiv\int_X \lim_{n \to \infty} g_n\ d\mu
	        = \lim_{n\to\infty} \int_X g_n\ d\mu
	        = \liminf_{n\to\infty}\int_X g_n\ d\mu
	        \leq \liminf_{n\to\infty}\int_X f_n\ d\mu
	    \end{align}
	\end{proof}
	
	\begin{definition}
	    For a measure space $(X, \mc{A}, \mu)$, define the \textbf{$\mc{L}^p$ space} of measurable functions to be
	    \begin{align}
	        \mc{L}^p(X, \mc{A}, \mu) := 
	        \left\{
	            f: X \to \R\ \Big|\ 
	            f \tx{ is measurable and }
	            \left(\int_X |f|^p\ d\mu \right)^{1/p} < \infty
	        \right\}
	    \end{align}
	    where $\left(\int_X |f|^p\ d\mu \right)^{1/p}$ is called the \textbf{$p$-norm} of $f$, denoted as $\norm{f}_p$. For simplicity, the $\mc{L}^p$ space is often denoted as $\mc{L}^p(\mu)$.
	\end{definition}
	
	\begin{definition}
	    Let $(X, \mc{A}, \mu)$ be a measure space, let $f \in \mc{L}^1(\mu)$ be an arbitrary function. $f$ can be expressed as the sum of two non-negative functions $f^+$ and $f^-$.
	    In particular,
	    \begin{align}
	        f^+(x) := \begin{cases}
	            f(x) &\tx{ if } f(x) \geq 0 \\
	            0 &\tx{ otherwise}
	        \end{cases}\quad
	        f^-(x) := \begin{cases}
	            -f(x) &\tx{ if } f(x) \leq 0 \\
	            0 &\tx{ otherwise}
	        \end{cases}
	    \end{align}
	    Then, the \textbf{Lebesgue integral} of function $f$ is defined as
	    \begin{align}
	        \int_X f\ d\mu := \int_X f^+\ d\mu - \int_X f^-\ d\mu
	    \end{align}
	\end{definition}
	
	\begin{theorem}[Lebesgue's Dominated Convergence Theorem]
        For a measure space $(X, \mc{A}, \mu)$, let $f_n: X \to \R$ be measurable function for each $n \in \N$.
        Suppose $(f_n)$ converges point-wisely to $f: X \to \R$ almost everywhere w.r.t. measure $\mu$\footnote{When we say a property holds almost everywhere w.r.t. measure $\mu$, it means the set on which this property does not hold has measure zero under $\mu$.}.
        If there exists $g \in \mc{L}^1(X, \mc{A}, \mu)$ such that $|f_n| \leq g$ for all $n \in \N$, then
        \begin{enumerate}
            \item $f_n \in \mc{L}^1(X, \mc{A}, \mu)$ for every $n \in \N$ and $f \in \mc{L}^1(X, \mc{A}, \mu)$,
            \item we may exchange the limit and integral.
            \begin{align}
                \lim_{n \to \infty} \int_X f_n\ d\mu &= \int_X f\ d\mu
            \end{align}
        \end{enumerate}
	\end{theorem}
	
	\begin{proof}
	    Since $|f_n| \leq g$, for every $n \in \N$
	    \begin{align}
	        \int_X |f_n|\ d\mu \leq \int_X g\ d\mu \leq \int_X |g|\ d\mu < \infty
	    \end{align}
	    Because $f$ is the point-wise limit of $f_n$ almost everywhere, $|f| \leq g$ almost everywhere as well.
	    Therefore,
	    \begin{align}
	        \int_X |f|\ d\mu \leq \int_X g\ d\mu < \infty
	    \end{align}
	    Hence $f_n, f \in \mc{L}^1$ for all $n$.
	    
	    To prove the second conclusion, we are going to show
	    \begin{align}
	        \lim_{n \to \infty} \int_X \abs{f_n - f}\ d\mu = 0
	    \end{align}
	    By triangle inequality, the following inequality holds almost everywhere for every $n \in \N$:
	    \begin{align}
	        \abs{f_n - f} \leq \abs{f_n} - \abs{f} \leq 2 g
	    \end{align}
	    as a result,
	    \begin{align}
	        \int_X  \abs{f_n - f}\ d\mu \leq \int_X \abs{f_n}\ d\mu + \int_X \abs{f}\ d\mu
	    \end{align}
	    Define
	    \begin{align}
            h_n := 2g - \abs{f_n - f} \geq 0
	    \end{align}
	    and $h_n$ is measurable as well. By Fatou's lemma,
	    \begin{align}
	        \int_X \liminf_{n\to\infty} h_n\ d\mu &\leq  \liminf_{n\to\infty} \int_X h_n\ d\mu \\
	        \implies
	        \int_X 2g\ d\mu - \int_X \underbrace{\liminf_{n \to \infty} \abs{f_n - f}}_{=0}\ d\mu &\leq \int_X 2g\ d\mu - \limsup_{n\to\infty} \int_X \abs{f_n - f}\ d\mu \\
	        \implies
	        \int_X 2g\ d\mu &\leq \int_X 2g\ d\mu - \limsup_{n\to\infty} \int_X \abs{f_n - f}\ d\mu \\
	        \implies
	        \liminf_{n\to\infty} \int_X \abs{f_n - f}\ d\mu &\leq \limsup_{n\to\infty} \int_X \abs{f_n - f}\ d\mu \leq 0 \\
	        \implies \lim_{n \to \infty}\int_X \abs{f_n - f}\ d\mu &\leq 0
	    \end{align}
	    Since $\abs{f_n - f} \geq 0$, the limit must be non-negative as well, hence
	    \begin{align}
	        \lim_{n \to \infty}\int_X \abs{f_n - f}\ d\mu &= 0 \label{eq:3}
	    \end{align}
	    Moreover,
	    \begin{align}
	        0 &\leq \abs{\int_X f_n\ d\mu - \int_X f\ d\mu} \\
	        &= \abs{\int_X f_n - f\ d\mu} \\
	        &\leq \int_X \abs{f_n - f}\ d\mu \to 0 \tx{ as } n \to \infty
	    \end{align}
	    By squeeze theorem,
	    \begin{align}
	        \lim_{n \to \infty} \abs{\int_X f_n\ d\mu - \int_X f\ d\mu} = 0 \\
	        \implies \lim_{n \to \infty} \int_X f_n\ d\mu = \int_X f\ d\mu
	    \end{align}
	\end{proof}
	
	\section{Constructing Measures}
	
	\begin{definition}
	    For an arbitrary set $X$ and its power set $\mc{P}(X)$, $\mc{A} \subseteq \mc{P}(X)$ is said to be a \textbf{semi-ring} of sets if it satisfies
	    \begin{enumerate}
	        \item $\varnothing \in \mc{A}$,
	        \item $A \cap B \in \mc{A}$ for every $A, B \in \mc{A}$,
	        \item for every $A, B \in \mc{A}$, there exists finitely many pairwise disjoint sets $S_1, S_2, \cdots, S_n \in \mc{A}$ such that $A \backslash B = \bigcup_{i=1}^n S_i$.
	    \end{enumerate}
	\end{definition}
	
	\begin{definition}
	    Let $\mc{A}$ be a semi-ring, then a mapping $\mu: \mc{A} \to [0, \infty]$ is a \textbf{pre-measure} if it satisfies
	    \begin{enumerate}
	        \item $\mu(\varnothing) = 0$,
	        \item and the \s-additivity, for any disjoint sequence $(A_i)_{i \in \N}$ in $\mc{A}$ such that $\bigcup_{i \in \N} A_i \in \mc{A}$,
	        \begin{align}
	            \mu\left(\bigcup_{i=1}^\infty A_i\right) = \sum_{i=1}^\infty \mu(A_i)
	        \end{align}
	    \end{enumerate}
	    The main difference between a measure and a pre-measure is that a measure must be defined on a \s-algebra.
	\end{definition}
	
	\begin{theorem}[Caratheodory's Extension Theorem]
	    For a set $X$, a semi-ring $\mc{A} \subseteq \mc{P}(X)$, and a pre-measure $\mu: \mc{A} \to [0, \infty]$,
	    \begin{enumerate}
	        \item $\mu$ has an extension: a measure \begin{align}
	            \tilde{\mu}: \sigma(\mc{A}) \to [0, \infty]
	        \end{align}
	        where $\sigma(\mc{A})$ is the \s-algebra generated by $\mc{A}$, such that
	        \begin{align}
	            \mu(A) = \tilde{\mu}(A)\quad \forall A \in \mc{A}
	        \end{align}
	        \item If there exists $(S_j)$ such that every $S_j \in \mc{A}$, $\bigcup_{j \in \N} S_i \ X$, and $\mu(S_j) < \infty$, then the extension $\tilde{\mu}$ is unique.
	    \end{enumerate}
	\end{theorem}
	
	\begin{proof}
	\end{proof}
	
	\begin{definition}
	    Let $F: \R \to \R$ be an monotonically non-decreasing function, then we may construct a pre-measure $\mu_F$ on semi-ring $\mc{A} := \{[a,b)\ |\ a, b \in \R, a \leq b\}$ such that
	    \begin{align}
	        \tilde{mu}_F([a, b)) &= F(b^-) - F(a^-) \\&= \lim_{x \to b^-} F(x) - \lim_{x \to a^-} F(x)\quad (\dagger)
	    \end{align}
	    By the Caratheodory's extension theorem, there exists a unique measure $\mu_F$ on $\sigma(\mc{A}) = \mc{B}(\R)$ satisfying ($\dagger$).
	    Then $\mu_F$ is essentially the measure constructed by $F$ on measurable space $(\R, \mc{B}(\R))$.
	\end{definition}
	
	\begin{example}
	    Let $F(x) := x$, then $\mu_F([a, b)) = b - a$ is the Lebesgue measure.
	\end{example}
	
	\begin{example}
	    Let $F(x) := 1\ \forall x \in \R$, then $\mu_F([a, b)) = 0$ is the zero measure.
	\end{example}
	
	\begin{example}
	    Let $F(x) = \id{x \geq 0}$, then for every $\varepsilon_1, \varepsilon_2 > 0$, $\mu_F([-\varepsilon_1, \varepsilon_2)) = 1$ and for any other half-open interval $I$ such that $0 \notin I$, $\mu_F(I) = 0$. In this case, $\mu_F$ is the Dirac measure $\delta_0$.
	\end{example}
	
	\begin{example}
	    Let $F: \R \to \R$ be any non-decreasing and continuously differentiable function, so that $F': \R \to [0, \infty)$.
	    Because $\mu_F([a, b))$ satisfies
	    \begin{align}
	        \mu_F([a, b)) &= F(b^-) - F(a^-) \\
	        &= F(b) - F(a) \\
	        &= \int_a^b F'(x)\ dx
	    \end{align}
	    where $dx$ is the normal Lebesgue measure and $F'(x)$ is called the density function. Then for every $A \in \mc{B}(\R)$, the measure
	    \begin{align}
	        \mu_F(A) := \int_A F'(x)\ dx
	    \end{align}
	\end{example}
	
	\begin{notation}
	    For now, let's consider the measure space $(\R, \mc{B}(\R), \lambda)$, where $\lambda$ is the Lebesgue measure defined as $\lambda([a, b)) := b - a$.
	\end{notation}
	
	\begin{definition}
	    Let $\lambda$ and $\mu$ be two measures on the measurable space $(\R, \mc{B}(\R))$ (for our consideration here, $\lambda$ is the Lebesgue measure), then $\mu$ is \textbf{absolutely continuous} (w.r.t. the Lebesgue measure) if
	    \begin{align}
	        \forall A \in \mc{B}(\R),\ \lambda(A) = 0 \implies \mu(A) = 0
	    \end{align}
	    denoted as $\mu \ll \lambda$.
	\end{definition}
	
	\begin{definition}
	    A measure $\mu$ is \textbf{singular} w.r.t. $\lambda$ if there exists $N \in \mc{B}(\R)$ such that
	    \begin{align}
	        \lambda(N) = 0 \land \mu(N^c) = 0
	    \end{align}
	    denoted as $\mu \perp \lambda$.
	\end{definition}
	
	\begin{definition}
	    A measure $\mu$ on $(X, \mc{A})$ is said to be \textbf{\s-finite} if there exists a sequence of $(E_n)$ satisfying
	    \begin{align}
	        X = \bigcup_{n=1}^\infty E_n
	    \end{align}
	    and $\mu(E_n) < \infty$ for all $n \in \N$.
	\end{definition}

    \begin{theorem}[Lebesgue Decomposition]
        Let $\mu: \R \to [0, \infty)$ be a \s-finite measure on $(\R, \mc{B}(\R))$, there exists a \ul{unique} decomposition $\mu_{ac}, \mu_s: \mc{B}(\R) \to [0, \infty]$ such that
        \begin{align}
            \mu &= \mu_{ac} + \mu_s \\
            \mu_{ac} &\ll \lambda \\
            \mu_s &\perp \lambda
        \end{align}
    \end{theorem}
    
    \begin{theorem}[Radon-Nikodym]
        Let $\mu$ be \s-finite measure on measurable space $(X, \mc{A})$ such that $\mu$ is absolutely continuous (w.r.t. the Lebesgue measure $\lambda$).
        Then there is a ($\lambda$-)measurable map $h: \R \to [0, \infty)$ (the density function) satisfying
        \begin{align}
            \mu (A) = \int_A h\ d\lambda\quad \forall A \in \mc{B}(\R)
        \end{align}
        The measurable map $h$ is defined as the \textbf{Radon–Nikodym derivative}, and is often denoted as $\frac{d \mu}{d \lambda}$.
    \end{theorem}
\end{document}

















